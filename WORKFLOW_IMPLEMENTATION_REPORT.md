# Beauty Kurly Shopping Agent ì›Œí¬í”Œë¡œìš° ìƒì„¸ êµ¬í˜„ ë³´ê³ ì„œ

**ì‘ì„±ì¼**: 2026-02-06  
**ë²„ì „**: 1.0  
**ìƒíƒœ**: êµ¬í˜„ ì§„í–‰ ì¤‘

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš” ë° ì„¤ê³„ ì˜ë„](#ê°œìš”-ë°-ì„¤ê³„-ì˜ë„)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ](#í•µì‹¬-ê¸°ìˆ -ìŠ¤íƒ)
4. [ì›Œí¬í”Œë¡œìš° ë‹¨ê³„ë³„ ìƒì„¸ ë¶„ì„](#ì›Œí¬í”Œë¡œìš°-ë‹¨ê³„ë³„-ìƒì„¸-ë¶„ì„)
5. [ë°ì´í„° íë¦„ ë° ë³€í™˜](#ë°ì´í„°-íë¦„-ë°-ë³€í™˜)
6. [íŒŒì´í”„ë¼ì¸ êµ¬ì¡°](#íŒŒì´í”„ë¼ì¸-êµ¬ì¡°)
7. [ì‹¤ë¬´ì  ê³ ë ¤ì‚¬í•­](#ì‹¤ë¬´ì -ê³ ë ¤ì‚¬í•­)
8. [ì„±ëŠ¥ ìµœì í™” ì „ëµ](#ì„±ëŠ¥-ìµœì í™”-ì „ëµ)
9. [ì—ëŸ¬ ì²˜ë¦¬ ë° ì•ˆì •ì„±](#ì—ëŸ¬-ì²˜ë¦¬-ë°-ì•ˆì •ì„±)

---

## ê°œìš” ë° ì„¤ê³„ ì˜ë„

### ğŸ¯ í”„ë¡œì íŠ¸ ëª©í‘œ

**Beauty Kurly Shopping Agent**ëŠ” ì˜¨ë¼ì¸ ë·°í‹° ì œí’ˆ ì‡¼í•‘ í”Œë«í¼(Kurly)ì˜ ì œí’ˆ ì •ë³´ì™€ ê³ ê° ë¦¬ë·°ë¥¼ **ìë™ìœ¼ë¡œ ìˆ˜ì§‘, ë¶„ì„, ì €ì¥**í•˜ì—¬ ì‚¬ìš©ì ì¿¼ë¦¬ì— ê¸°ë°˜í•œ **ì§€ëŠ¥í˜• ì œí’ˆ ì¶”ì²œ ì‹œìŠ¤í…œ**ì„ êµ¬í˜„í•˜ëŠ” ì›Œí¬í”Œë¡œìš°ì…ë‹ˆë‹¤.

### ğŸ“Š í•µì‹¬ ê°€ì¹˜ ì œì•ˆ

| í•­ëª© | ì„¤ëª… |
|------|------|
| **ë°ì´í„° ìë™í™”** | ìˆ˜ë™ í¬ë¡¤ë§ ì œê±°, ì¼ì¼ ìë™ ì—…ë°ì´íŠ¸ |
| **AI ê°ì • ë¶„ì„** | ë¦¬ë·°ì˜ ê°ê´€ì  ê°ì • ì ìˆ˜í™” (1-5ì ) |
| **ì†ì„±ë³„ ë¶„ì„** | ABSAë¥¼ í†µí•œ ì œí’ˆ ì†ì„±ë³„ í‰ê°€ (ë³´ìŠµë ¥, í¡ìˆ˜ë ¥ ë“±) |
| **ë²¡í„° ê²€ìƒ‰** | ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ìœ¼ë¡œ ì •í™•í•œ ì œí’ˆ ì¶”ì²œ |
| **ì¿¼ë¦¬ ê¸°ë°˜ ëŒ€ë‹µ** | ì‚¬ìš©ì ì§ˆë¬¸ì— ëŒ€í•œ ê·¼ê±° ìˆëŠ” ë‹µë³€ ìƒì„± |

### ğŸ”„ ì„¤ê³„ ì² í•™

**ë¶„ë¦¬ëœ íŒŒì´í”„ë¼ì¸ ì•„í‚¤í…ì²˜**

```
Upstream Pipeline (ë°ì´í„° ìˆ˜ì§‘ ë° ì²˜ë¦¬)
    â†“
Downstream Pipeline (ì‚¬ìš©ì ì¿¼ë¦¬ ì‘ë‹µ)
```

- **ìƒí–¥ì‹(Upstream)**: ë°°ì¹˜ ì²˜ë¦¬, ìë™í™”, ì£¼ê¸°ì  ì‹¤í–‰
- **í•˜í–¥ì‹(Downstream)**: ì‹¤ì‹œê°„ ì‘ë‹µ, API íŠ¸ë¦¬ê±°, ì¦‰ê°ì  ë°˜ì‘

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ğŸ—ï¸ ê³ ìˆ˜ì¤€ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        n8n Workflow Engine                          â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  CRAWLING PIPELINE   â”‚           â”‚  QUERY PIPELINE      â”‚       â”‚
â”‚  â”‚  (Daily Scheduled)   â”‚           â”‚  (Real-time Webhook) â”‚       â”‚
â”‚  â”‚                      â”‚           â”‚                      â”‚       â”‚
â”‚  â”‚  1. Get Products     â”‚           â”‚  1. Parse Query      â”‚       â”‚
â”‚  â”‚  2. Fetch Reviews    â”‚           â”‚  2. Embed Query      â”‚       â”‚
â”‚  â”‚  3. Sentiment Analysisâ”‚          â”‚  3. Vector Search    â”‚       â”‚
â”‚  â”‚  4. ABSA Analysis    â”‚           â”‚  4. SQL Search       â”‚       â”‚
â”‚  â”‚  5. Generate Vector  â”‚           â”‚  5. Generate Answer  â”‚       â”‚
â”‚  â”‚  6. Save to DB       â”‚           â”‚  6. Log & Response   â”‚       â”‚
â”‚  â”‚  7. Save to Qdrant   â”‚           â”‚                      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚           â†“                                    â†‘                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚         Storage & Retrieval Layer                  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                    â†“                    â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚PostgreSQLâ”‚          â”‚  Qdrant  â”‚      â”‚   Redis     â”‚
    â”‚ (RDB)    â”‚          â”‚ (Vector) â”‚      â”‚  (Cache)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Š ë°ì´í„° íë¦„ë„

```
Kurly API
    â†“
[Webhook/Schedule]
    â†“
[Crawling Pipeline] â”€â†’ PostgreSQL (products, beauty_reviews)
    â†“                       â†‘
[AI Analysis]               â”‚ (Read)
    â”œâ”€ Sentiment (Solar)    â”‚
    â”œâ”€ ABSA Analysis        â”‚
    â””â”€ Embeddings (OpenAI)  â”‚
    â†“                       â”‚
[Vector Storage] â†’ Qdrant â†â”€â”˜
    â†“
[Logging] â†’ Query Logs Table
    

User Query
    â†“
[Webhook]
    â†“
[Query Pipeline] â†â†’ PostgreSQL (Select)
    â”œâ”€ Vector Search â†â†’ Qdrant
    â”œâ”€ Keyword Search â†â†’ PostgreSQL
    â””â”€ ABSA Aggregation
    â†“
[AI Answer Generation] (Solar Pro)
    â†“
Response to User
```

---

## í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ

### ğŸ› ï¸ ì»´í¬ë„ŒíŠ¸ë³„ ê¸°ìˆ 

| ê³„ì¸µ | ê¸°ìˆ  | ìš©ë„ | ì„ íƒ ì´ìœ  |
|------|------|------|---------|
| **ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜** | n8n v0.234.0+ | ì›Œí¬í”Œë¡œìš° ìë™í™” | ë‚®ì€ í•™ìŠµê³¡ì„ , JSON ê¸°ë°˜ êµ¬ì„± |
| **ë°ì´í„°ë² ì´ìŠ¤** | PostgreSQL 14+ | ê´€ê³„í˜• ë°ì´í„° ì €ì¥ | JSONB ì§€ì›, ë³µí•© ì¿¼ë¦¬ |
| **ë²¡í„°DB** | Qdrant 1.7+ | ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ | ë†’ì€ ì²˜ë¦¬ëŸ‰, í˜ì´ë¡œë“œ í•„í„°ë§ |
| **ê°ì • ë¶„ì„** | Upstage Solar Pro | AI ë¶„ì„ | í•œêµ­ì–´ ìµœì í™”, ë¹„ìš© íš¨ìœ¨ |
| **ì„ë² ë”©** | OpenAI text-embedding-3-small | ë²¡í„° ìƒì„± | 1536 ì°¨ì›, ë†’ì€ ì •í™•ë„ |
| **ë‹µë³€ ìƒì„±** | Upstage Solar Pro | ìµœì¢… ì‘ë‹µ | í•œêµ­ì–´ ìì—°ìŠ¤ëŸ¬ì›€ |
| **ì»¨í…Œì´ë„ˆ** | Docker Compose | ë¡œì»¬ ì‹¤í–‰ í™˜ê²½ | ì¼ê´€ì„±, ì¬í˜„ì„± |

### ğŸ” ìê²©ì¦ëª… ê´€ë¦¬

```
n8n ë‚´ë¶€ Credentials Store
â”œâ”€ PostgreSQL account (products, beauty_reviews ì ‘ê·¼)
â”œâ”€ Upstage Solar API (ê°ì •ë¶„ì„, ë‹µë³€ìƒì„±)
â”œâ”€ OpenAI API (ì„ë² ë”©, ìµœì¢…ë‹µë³€)
â””â”€ Qdrant API (ë²¡í„°ê²€ìƒ‰)
```

---

## ì›Œí¬í”Œë¡œìš° ë‹¨ê³„ë³„ ìƒì„¸ ë¶„ì„

### Phase 1: ë°ì´í„° ìˆ˜ì§‘ ë° ì¤€ë¹„ (Upstream Pipeline)

#### 1ï¸âƒ£ **íŠ¸ë¦¬ê±°: ìŠ¤ì¼€ì¤„/Webhook**

**ì •ì˜**: ì›Œí¬í”Œë¡œìš°ì˜ ì§„ì…ì , ì¼ì¼ ìì •ì— ìë™ ì‹¤í–‰

```json
{
  "type": "schedule",
  "trigger": "every day at midnight (UTC)",
  "or": "POST /webhook/beauty-kurly-agent"
}
```

**ì‹¤ë¬´ ê³ ë ¤ì‚¬í•­**:
- âœ… **UTC ì‹œê°„ëŒ€ ì„¤ì •**: ì„œë²„ ì‹œê°„ëŒ€ì™€ ì¼ì¹˜ í•„ìš”
- âœ… **Webhook ëŒ€ì•ˆ**: ì¦‰ì‹œ ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥
- âœ… **ì‹¤íŒ¨ ì¬ì‹œë„**: n8n ë‚´ì¥ ì¬ì‹œë„ ì •ì±… ì‚¬ìš©

---

#### 2ï¸âƒ£ **Get Product List: PostgreSQL ì¡°íšŒ**

**ëª©í‘œ**: ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ìµœê·¼ ì—…ë°ì´íŠ¸ëœ ë·°í‹° ì œí’ˆ 10ê°œ ì¶”ì¶œ

**SQL ì¿¼ë¦¬**:
```sql
SELECT product_number, name, category 
FROM products 
WHERE category LIKE '%beauty%' 
ORDER BY updated_at DESC 
LIMIT 10;
```

**ë°ì´í„° ëª¨ë¸** (products í…Œì´ë¸”):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚product_no   â”‚name          â”‚category    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚BK001        â”‚ìˆ˜ë¶„ ê°€ë“ í† ë„ˆ â”‚beauty      â”‚
â”‚BK002        â”‚ì§„ì • ì—ì„¼ìŠ¤   â”‚beauty      â”‚
â”‚...          â”‚...           â”‚...        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë°˜í™˜ê°’**:
```javascript
[
  {
    "product_number": "BK001",
    "name": "ìˆ˜ë¶„ ê°€ë“ í† ë„ˆ",
    "category": "beauty"
  },
  ...
]
```

**ì‹¤ë¬´ ìµœì í™”**:
- `LIMIT 10`: ì´ˆê¸° í…ŒìŠ¤íŠ¸ìš© (í”„ë¡œë•ì…˜ì—ì„œëŠ” íŒŒë¼ë¯¸í„°í™”)
- `updated_at DESC`: ê°€ì¥ ìµœê·¼ ë°í’ˆ ìš°ì„ 
- `LIKE '%beauty%'`: ì •í™•í•œ ì¹´í…Œê³ ë¦¬ í•„í„°ë§

---

#### 3ï¸âƒ£ **Split Products: ë°°ì¹˜ ì²˜ë¦¬**

**ëª©í‘œ**: 10ê°œì˜ ì œí’ˆì„ 5ê°œ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ë³‘ë ¬ ì²˜ë¦¬

```
Products [10ê°œ]
    â†“
Batch 1: [5ê°œ] â”€â†’ ë³‘ë ¬ ì²˜ë¦¬
Batch 2: [5ê°œ] â”€â†’ ë³‘ë ¬ ì²˜ë¦¬
```

**ì„¤ì •**:
```json
{
  "batchSize": 5,
  "node": "splitInBatches"
}
```

**ì´ì **:
- âœ… API ìš”ì²­ ë³‘ë ¬í™”
- âœ… ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±
- âœ… ì‹œê°„ ë‹¨ì¶•

---

#### 4ï¸âƒ£ **Fetch Kurly Reviews: ì™¸ë¶€ API í¬ë¡¤ë§**

**ëª©í‘œ**: ê° ì œí’ˆì˜ ê³ ê° ë¦¬ë·°ë¥¼ Kurly APIì—ì„œ ê°€ì ¸ì˜¤ê¸°

**API ì—”ë“œí¬ì¸íŠ¸**:
```
GET https://api.kurly.com/v2/reviews/products/{product_number}
```

**ìš”ì²­ ì˜ˆì‹œ**:
```http
GET /v2/reviews/products/BK001
User-Agent: Mozilla/5.0
Accept: application/json
```

**ë°˜í™˜ ë°ì´í„° êµ¬ì¡°**:
```json
{
  "product_number": "BK001",
  "data": {
    "reviews": [
      {
        "id": "REV_12345",
        "content": "ì •ë§ ë³´ìŠµë ¥ì´ ì¢‹ì•„ìš”! ê±´ì¡°í•œ ì œ í”¼ë¶€ì— ë”± ë§ë„¤ìš”.",
        "rating": 5.0,
        "author": {"name": "ì‚¬ìš©ìA"},
        "created_at": "2026-02-01T10:30:00Z",
        "like_count": 25,
        "verified_purchase": true,
        "attributes": {
          "skin_type": "ê±´ì„±",
          "age_group": "20s"
        }
      },
      ...
    ]
  }
}
```

**ì—ëŸ¬ ì²˜ë¦¬**:
- timeout: 10ì´ˆ
- 404 ì‘ë‹µ: í•´ë‹¹ ì œí’ˆ ê±´ë„ˆë›°ê¸°
- ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ì¬ì‹œë„ 3íšŒ

---

#### 5ï¸âƒ£ **Extract Review Data: ë°ì´í„° ì •ê·œí™”**

**ëª©í‘œ**: í¬ë¡¤ë§ëœ ë¦¬ë·° ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆì— ë§ê²Œ ë³€í™˜

**ì…ë ¥**:
```javascript
{
  "product_number": "BK001",
  "data": {
    "reviews": [
      {"id": "REV_123", "content": "...", "rating": 5.0, ...}
    ]
  }
}
```

**ì²˜ë¦¬ ë¡œì§** (Code ë…¸ë“œ):
```javascript
const extractedReviews = [];

for (const item of items) {
  const productNumber = item.json.product_number;
  const reviews = item.json.data?.reviews || [];
  
  for (const review of reviews) {
    extractedReviews.push({
      json: {
        product_number: productNumber,
        review_id: review.id,
        content: review.content || review.comment,
        rating: review.rating || review.score,
        created_at: review.created_at || review.registered_at,
        author: review.author?.name || 'Anonymous',
        like_count: review.like_count || 0,
        verified_purchase: review.verified_purchase || false,
        skin_type: review.attributes?.skin_type || null,
        age_group: review.attributes?.age_group || null
      }
    });
  }
}

return extractedReviews;
```

**ì¶œë ¥**:
```json
[
  {
    "product_number": "BK001",
    "review_id": "REV_123",
    "content": "ì •ë§ ë³´ìŠµë ¥ì´ ì¢‹ì•„ìš”!",
    "rating": 5.0,
    "created_at": "2026-02-01T10:30:00Z",
    "author": "ì‚¬ìš©ìA",
    "like_count": 25,
    "verified_purchase": true,
    "skin_type": "ê±´ì„±",
    "age_group": "20s"
  },
  ...
]
```

**ì„¤ê³„ ê³ ë ¤ì‚¬í•­**:
- âœ… Null ì•ˆì „ ì²˜ë¦¬ (`?.` ì—°ì‚°ì)
- âœ… ëŒ€ì²´ê°’ ì„¤ì • (`|| 'Anonymous'`)
- âœ… íƒ€ì… ì¼ê´€ì„± ë³´ì¥

---

### Phase 2: AI ë¶„ì„ (Sentiment & ABSA)

#### 6ï¸âƒ£ **Sentiment Analysis: Solar Proë¡œ ê°ì • ë¶„ì„**

**ëª©í‘œ**: ê° ë¦¬ë·°ì˜ ê³ ê° ë§Œì¡±ë„ë¥¼ 1-5ì ìœ¼ë¡œ ìˆ˜ì¹˜í™”

**ëª¨ë¸**: Upstage Solar Pro  
**ì˜¨ë„**: 0.3 (ì¼ê´€ì„± ì¤‘ì‹œ)  
**ì‘ë‹µ í˜•ì‹**: JSON

**í”„ë¡¬í”„íŠ¸ êµ¬ì¡°**:
```
System Role: í™”ì¥í’ˆ ë¦¬ë·° ê°ì • ë¶„ì„ ì „ë¬¸ê°€

Few-Shot Examples:
- "ì¬ì¬ì¬ì¬êµ¬ë§¤ ë„ˆë¬´ ì¢‹ì•„ìš”" â†’ 5ì 
- "ì¢‹ë‹¤ê³  ìƒ€ëŠ”ë° ë” ì¨ë´ì•¼í• ê±° ê°™ì•„ìš”" â†’ 3ì 
- "í–¥ì´ ê°•í•´ì„œ ì €ëŠ” ë³„ë¡œì…ë‹ˆë‹¤" â†’ 2ì 

User Input: {ë¦¬ë·° ë‚´ìš©}

Expected Output: JSON with sentiment_score (1-5), label, emotions, key_points
```

**ì ìˆ˜ ì²´ê³„** (í•œêµ­ ë·°í‹° ì‹œì¥ ë§ì¶¤):
```
5ì  (Very satisfied): 
  - ì¬êµ¬ë§¤ ì˜ì‚¬ ê°•í•¨, ê·¹ì°¬
  - í‚¤ì›Œë“œ: "ì™„ì „ ì¶”ì²œ", "ëŒ€ì‚¬ë‘", "ê¿€í…œ"

4ì  (Satisfied):
  - ê¸ì •ì , ë§Œì¡±
  - í‚¤ì›Œë“œ: "ì¢‹ì•„ìš”", "ê´œì°®ì•„ìš”", "ì¶”ì²œ"

3ì  (Neutral):
  - ì¤‘ë¦½ì , ì¥ë‹¨ì  í˜¼ì¬
  - í‚¤ì›Œë“œ: "ê·¸ëƒ¥", "ì˜ì˜", "ë” ì¨ë´ì•¼"

2ì  (Dissatisfied):
  - ê¸°ëŒ€ ì´í•˜, ë¶€ì •ì 
  - í‚¤ì›Œë“œ: "ë³„ë¡œ", "ì‹¤ë§", "ì•ˆë§ì•„"

1ì  (Very dissatisfied):
  - ì‹¬ê°í•œ ë¶ˆë§Œ, í”¼ë¶€ íŠ¸ëŸ¬ë¸”
  - í‚¤ì›Œë“œ: "ëª»ì“°ê² ìŒ", "ì•ŒëŸ¬ì§€", "ë”ì°"
```

**ë°˜í™˜ ë°ì´í„°**:
```json
{
  "sentiment_score": 5,
  "sentiment_label": "Very satisfied",
  "emotions": ["ê¸°ì¨", "ë§Œì¡±ê°"],
  "key_points": ["ë³´ìŠµë ¥ íƒì›”", "í¡ìˆ˜ ë¹ ë¦„"]
}
```

**ì‹¤ë¬´ ê²€ì¦**:
- âœ… ì ìˆ˜ ë¶„í¬: ê· í˜•ì¡íŒ ë¶„í¬ (1-5 ê³¨ê³ ë£¨)
- âœ… ê±°ì§“ì–‘ì„± ê°ì§€: ë¶€ì •ì  ë‹¨ì–´ í¬í•¨ ë¦¬ë·° ì¬í™•ì¸
- âœ… ì–¸ì–´ ë‰˜ì•™ìŠ¤: í•œêµ­ì–´ íŠ¹í™” ëª¨ë¸ í•„ìˆ˜

---

#### 7ï¸âƒ£ **ABSA (Aspect-Based Sentiment Analysis): ì†ì„±ë³„ ê°ì • ë¶„ì„**

**ëª©í‘œ**: ì œí’ˆì˜ ê° íŠ¹ì„±(ë³´ìŠµë ¥, í¡ìˆ˜ë ¥, í–¥ ë“±)ì— ëŒ€í•œ ê°œë³„ í‰ê°€

**ë¶„ì„ ëŒ€ìƒ ì†ì„±** (í™”ì¥í’ˆ ì—…ê³„ í‘œì¤€):
```
1. ë³´ìŠµë ¥ (Hydration) - í”¼ë¶€ ìˆ˜ë¶„ ê³µê¸‰ ëŠ¥ë ¥
2. í¡ìˆ˜ë ¥ (Absorption) - ì œí’ˆ í¡ìˆ˜ ì†ë„
3. ëˆì ì„ (Stickiness) - ìœ ë¶„ê°, í…ìŠ¤ì²˜
4. í–¥ (Fragrance) - ì œí’ˆ ëƒ„ìƒˆ
5. ìê·¹ì„± (Irritation) - í”¼ë¶€ ìê·¹ ì •ë„
6. ê°€ì„±ë¹„ (Value) - ê°€ê²© ëŒ€ë¹„ ê°€ì¹˜
7. íš¨ê³¼ (Effectiveness) - ì‹¤ì œ íš¨ê³¼
```

**ABSA í”„ë¡¬í”„íŠ¸**:
```
ë‹¹ì‹ ì€ ABSA ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
ë‹¤ìŒ ë¦¬ë·°ì˜ ì†ì„±ë³„ ê°ì •ì„ ë¶„ì„í•˜ì„¸ìš”.

ê° ì†ì„±ì— ëŒ€í•´:
{
  "name": "ì†ì„±ëª…",
  "sentiment": "ê¸ì •|ì¤‘ë¦½|ë¶€ì •",
  "score": 1-5,
  "mentioned": true/false,
  "quote": "ê´€ë ¨ ì¸ìš©ë¬¸"
}
```

**ë°˜í™˜ ë°ì´í„°**:
```json
{
  "aspects": [
    {
      "name": "ë³´ìŠµë ¥",
      "sentiment": "ê¸ì •",
      "score": 5,
      "mentioned": true,
      "quote": "ì •ë§ ë³´ìŠµë ¥ì´ ì¢‹ì•„ìš”!"
    },
    {
      "name": "í¡ìˆ˜ë ¥",
      "sentiment": "ê¸ì •",
      "score": 4,
      "mentioned": true,
      "quote": "ëˆì ì„ë„ ì—†ê³  í¡ìˆ˜ë„ ë¹¨ë¼ì„œ"
    },
    {
      "name": "í–¥",
      "sentiment": "ì¤‘ë¦½",
      "score": 3,
      "mentioned": true,
      "quote": "í–¥ì´ ì¡°ê¸ˆ ê°•í•œ í¸"
    },
    {
      "name": "ìê·¹ì„±",
      "sentiment": "ê¸ì •",
      "score": 5,
      "mentioned": false,
      "quote": null
    }
  ]
}
```

**ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ (JSONB)**:
```sql
UPDATE beauty_reviews 
SET absa_aspects = jsonb_build_object(
  'hydration', score_5,
  'absorption', score_4,
  'stickiness', score_3,
  ...
)
WHERE review_id = 'REV_123';
```

**ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜**:
- âœ… **ì„¸ë°€í•œ ì¶”ì²œ**: "ì§€ì„±í”¼ë¶€ì¸ë° ëˆì ì„ ì—†ëŠ” ì œí’ˆ" ê²€ìƒ‰ ê°€ëŠ¥
- âœ… **ì œí’ˆ ê°œì„ **: ì œì¡°ì‚¬ê°€ ì•½ì  íŒŒì•…
- âœ… **ì‚¬ìš©ì ë§Œì¡±ë„**: í”¼ë¶€ íƒ€ì…ë³„ ë§ì¶¤ ì¶”ì²œ

---

### Phase 3: ë²¡í„°í™” ë° ì €ì¥

#### 8ï¸âƒ£ **Generate Embedding: OpenAI í…ìŠ¤íŠ¸ ì„ë² ë”©**

**ëª©í‘œ**: ë¦¬ë·° í…ìŠ¤íŠ¸ë¥¼ 1536ì°¨ì› ë²¡í„°ë¡œ ë³€í™˜

**ëª¨ë¸**: OpenAI text-embedding-3-small  
**ì°¨ì›ìˆ˜**: 1536  
**ìµœëŒ€ í† í°**: 8191

**ì…ë ¥**:
```
"ì •ë§ ë³´ìŠµë ¥ì´ ì¢‹ì•„ìš”! ê±´ì¡°í•œ ì œ í”¼ë¶€ì— ë”± ë§ë„¤ìš”. ëˆì ì„ë„ ì—†ê³  í¡ìˆ˜ë„ ë¹¨ë¼ì„œ ì•„ì¹¨ì— ì‚¬ìš©í•˜ê¸° ì¢‹ìŠµë‹ˆë‹¤."
```

**ë²¡í„° ë³€í™˜ ê³¼ì •**:
```
Text
  â†“
Tokenization (ë‹¨ì–´ ë¶„í•´)
  â†“
Neural Embedding (ì˜ë¯¸ ë²¡í„°í™”)
  â†“
1536-dim Vector: [0.123, -0.456, 0.789, ...]
```

**ë²¡í„°ì˜ ì˜ë¯¸**:
```javascript
// ì˜ë¯¸ì ìœ¼ë¡œ ìœ ì‚¬í•œ ë¦¬ë·°ë“¤ì€ ë²¡í„° ê±°ë¦¬ê°€ ê°€ê¹Œì›€
review1 = "ë³´ìŠµë ¥ì´ ì •ë§ ì¢‹ì•„ìš”" â†’ [ë²¡í„°A]
review2 = "ìˆ˜ë¶„ê°ì´ íƒì›”í•©ë‹ˆë‹¤"    â†’ [ë²¡í„°A']  // ê±°ë¦¬ ì‘ìŒ
review3 = "ë„ˆë¬´ ê¸°ë¦„ì ¸ìš”"         â†’ [ë²¡í„°B]   // ê±°ë¦¬ í¼
```

**ì €ì¥ êµ¬ì¡°**:
```json
{
  "review_id": "REV_123",
  "product_number": "BK001",
  "content": "ì •ë§ ë³´ìŠµë ¥ì´ ì¢‹ì•„ìš”...",
  "embedding": [0.123, -0.456, ..., 0.789],  // 1536ê°œ ê°’
  "sentiment_score": 5,
  "sentiment_label": "Very satisfied",
  "emotions": ["ê¸°ì¨", "ë§Œì¡±ê°"],
  "absa_aspects": {...},
  "processed_at": "2026-02-06T12:30:00Z"
}
```

**ì‹¤ë¬´ ê³ ë ¤ì‚¬í•­**:
- âœ… ìºì‹±: ë™ì¼ í…ìŠ¤íŠ¸ëŠ” ì¬ì‚¬ìš©
- âœ… ë°°ì¹˜ ì²˜ë¦¬: í•œ ë²ˆì— ì—¬ëŸ¬ ë²¡í„° ìƒì„±
- âœ… ë¹„ìš©: OpenAI API í˜¸ì¶œ ë¹„ìš© ì£¼ì˜

---

#### 9ï¸âƒ£ **Save to PostgreSQL: ì •ê·œí™”ëœ ë°ì´í„° ì €ì¥**

**ëª©í‘œ**: ë¶„ì„ ê²°ê³¼ë¥¼ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥

**í…Œì´ë¸”: beauty_reviews**
```sql
CREATE TABLE beauty_reviews (
    id SERIAL PRIMARY KEY,
    review_id VARCHAR(100) UNIQUE NOT NULL,
    product_number VARCHAR(50) NOT NULL,
    content TEXT NOT NULL,
    rating DECIMAL(2, 1),
    created_at TIMESTAMP,
    author VARCHAR(100),
    like_count INTEGER DEFAULT 0,
    verified_purchase BOOLEAN DEFAULT false,
    
    -- ì‚¬ìš©ì ì†ì„±
    skin_type VARCHAR(50),
    age_group VARCHAR(50),
    
    -- ê°ì • ë¶„ì„ ê²°ê³¼
    sentiment_score INTEGER CHECK (sentiment_score >= 1 AND sentiment_score <= 5),
    sentiment_label VARCHAR(20),
    emotions JSONB,
    key_points JSONB,
    
    -- ABSA (ì†ì„±ë³„ ê°ì •ë¶„ì„)
    absa_aspects JSONB,
    
    -- ë©”íƒ€ë°ì´í„°
    processed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (product_number) REFERENCES products(product_number) ON DELETE CASCADE
);
```

**n8n Insert ì„¤ì •**:
```json
{
  "operation": "insert",
  "table": "beauty_reviews",
  "columns": {
    "review_id": "={{ $json.review_id }}",
    "product_number": "={{ $json.product_number }}",
    "content": "={{ $json.content }}",
    "rating": "={{ $json.rating }}",
    "created_at": "={{ $json.created_at }}",
    "author": "={{ $json.author }}",
    "like_count": "={{ $json.like_count }}",
    "verified_purchase": "={{ $json.verified_purchase }}",
    "skin_type": "={{ $json.skin_type }}",
    "age_group": "={{ $json.age_group }}",
    "sentiment_score": "={{ $json.sentiment_score }}",
    "sentiment_label": "={{ $json.sentiment_label }}",
    "emotions": "={{ $json.emotions }}",
    "key_points": "={{ $json.key_points }}",
    "absa_aspects": "={{ $json.absa_aspects }}",
    "processed_at": "={{ $json.processed_at }}"
  }
}
```

**ë°ì´í„° ë¬´ê²°ì„±**:
- âœ… PK: review_id (ê³ ìœ ì„± ë³´ì¥)
- âœ… FK: product_number (ì œí’ˆ ì°¸ì¡°)
- âœ… CHECK: sentiment_score ë²”ìœ„ ê²€ì¦
- âœ… JSONB: ìœ ì—°í•œ êµ¬ì¡° ì €ì¥

---

#### ğŸ”Ÿ **Save to Qdrant: ë²¡í„° ì €ì¥ ë° ì¸ë±ì‹±**

**ëª©í‘œ**: ì„ë² ë”© ë²¡í„°ë¥¼ ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ì—¬ ìœ ì‚¬ë„ ê²€ìƒ‰ ì¤€ë¹„

**Qdrant ì»¬ë ‰ì…˜ êµ¬ì¡°**:
```json
{
  "name": "beauty_reviews",
  "vector_size": 1536,
  "distance": "cosine",
  "payload": {
    "review_id": {"type": "keyword"},
    "product_number": {"type": "keyword"},
    "sentiment_score": {"type": "integer"},
    "rating": {"type": "float"},
    "skin_type": {"type": "keyword"},
    "created_at": {"type": "datetime"}
  }
}
```

**ì €ì¥ ë°ì´í„° ì˜ˆì‹œ**:
```json
{
  "id": 12345,
  "vector": [0.123, -0.456, ..., 0.789],  // 1536 ì°¨ì›
  "payload": {
    "review_id": "REV_123",
    "product_number": "BK001",
    "content": "ì •ë§ ë³´ìŠµë ¥ì´ ì¢‹ì•„ìš”...",
    "sentiment_score": 5,
    "rating": 5.0,
    "skin_type": "ê±´ì„±",
    "author": "ì‚¬ìš©ìA",
    "created_at": "2026-02-01T10:30:00Z"
  }
}
```

**ì¸ë±ì‹± ì „ëµ**:
- âœ… Vector Index: ë¹ ë¥¸ ìœ ì‚¬ë„ ê²€ìƒ‰ (HNSW)
- âœ… Payload Index: í•„í„°ë§ ìµœì í™”
- âœ… ê±°ë¦¬ ë©”íŠ¸ë¦­: Cosine (ì˜ë¯¸ ìœ ì‚¬ì„±)

**ê²€ìƒ‰ ì¿¼ë¦¬ ì˜ˆì‹œ**:
```json
{
  "vector": [ì‚¬ìš©ìì¿¼ë¦¬_ì„ë² ë”©],
  "limit": 20,
  "score_threshold": 0.7,
  "filter": {
    "must": [
      {"key": "sentiment_score", "range": {"gte": 3}}
    ]
  }
}
```

**ì´ì **:
- âœ… O(1) ê²€ìƒ‰ ì‹œê°„ë³µì¡ë„
- âœ… ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ (ì •í™•í•œ ë§¤ì¹­ ë¶ˆí•„ìš”)
- âœ… í˜ì´ë¡œë“œ í•„í„°ë§ (ê°ì •ì ìˆ˜, í”¼ë¶€íƒ€ì… ë“±)

---

### Phase 4: ì‚¬ìš©ì ì¿¼ë¦¬ ì‘ë‹µ (Query Pipeline)

#### 1ï¸âƒ£ **User Query Webhook: ì‚¬ìš©ì ì…ë ¥ ìˆ˜ì§‘**

**Webhook ì—”ë“œí¬ì¸íŠ¸**:
```
POST /webhook/beauty-query
Content-Type: application/json

{
  "user_id": "user_12345",
  "query": "ì§€ì„± í”¼ë¶€ì¸ë° ëˆì ì„ ì—†ëŠ” í† ë„ˆ ì¶”ì²œí•´ì¤„ë˜?",
  "skin_type": "ì§€ì„±",
  "concern": "ê±´ì¡°í•¨"
}
```

**n8n Webhook ë…¸ë“œ**:
```json
{
  "httpMethod": "POST",
  "path": "beauty-query",
  "responseMode": "lastNode",
  "options": {}
}
```

---

#### 2ï¸âƒ£ **Parse User Query: ì¿¼ë¦¬ ë¶„ì„**

**ëª©í‘œ**: ì‚¬ìš©ì ì§ˆë¬¸ì„ êµ¬ì¡°í™”ëœ ë°ì´í„°ë¡œ íŒŒì‹±

**AI ëª¨ë¸**: Upstage Solar Pro  
**ì˜¨ë„**: 0.2 (ì •í™•ì„± ì¤‘ì‹œ)

**í”„ë¡¬í”„íŠ¸**:
```
ì‚¬ìš©ì ì¿¼ë¦¬ë¥¼ ë¶„ì„í•˜ì—¬ JSONìœ¼ë¡œ ì¶œë ¥:

{
  "intent": "ì¶”ì²œ" | "ë¹„êµ" | "ë¦¬ë·°ìš”ì•½" | "ì •ë³´ì¡°íšŒ",
  "keywords": ["í•µì‹¬í‚¤ì›Œë“œ1", "í•µì‹¬í‚¤ì›Œë“œ2"],
  "filters": {
    "skin_type": "ê±´ì„±" | "ì§€ì„±" | "ë³µí•©ì„±" | null,
    "price_range": "ì €ê°€" | "ì¤‘ê°€" | "ê³ ê°€" | null,
    "concern": "ëª¨ê³µ" | "ì£¼ë¦„" | "ë¯¸ë°±" | "ê±´ì¡°í•¨" | null
  },
  "product_category": "í† ë„ˆ" | "ì—ì„¼ìŠ¤" | "í¬ë¦¼" | null
}
```

**ì…ë ¥ ì˜ˆì‹œ**:
```
"ì§€ì„± í”¼ë¶€ì¸ë° ëˆì ì„ ì—†ëŠ” í† ë„ˆ ì¶”ì²œí•´ì¤„ë˜?"
```

**ì¶œë ¥**:
```json
{
  "intent": "ì¶”ì²œ",
  "keywords": ["ëˆì ì„ ì—†ìŒ", "í† ë„ˆ", "ì§€ì„±"],
  "filters": {
    "skin_type": "ì§€ì„±",
    "price_range": null,
    "concern": "ëˆì ì„"
  },
  "product_category": "í† ë„ˆ"
}
```

---

#### 3ï¸âƒ£ **Generate Query Embedding: ì¿¼ë¦¬ ë²¡í„°í™”**

**ëª©í‘œ**: ì‚¬ìš©ì ì§ˆë¬¸ì„ ë²¡í„°ë¡œ ë³€í™˜

**í”„ë¡œì„¸ìŠ¤**:
```
User Query
  â†“
OpenAI Embedding
  â†“
1536-dim Vector
```

**ë²¡í„° í™œìš©**:
- Qdrantì—ì„œ ì˜ë¯¸ì ìœ¼ë¡œ ìœ ì‚¬í•œ ë¦¬ë·° ê²€ìƒ‰
- "ì§€ì„± í”¼ë¶€ ëˆì ì„ ì—†ëŠ” í† ë„ˆ" â†’ ê´€ë ¨ ë¦¬ë·° ë²¡í„°ì™€ ìœ ì‚¬

---

#### 4ï¸âƒ£ **Vector Search - Qdrant: ë²¡í„° ìœ ì‚¬ë„ ê²€ìƒ‰**

**ëª©í‘œ**: ì¿¼ë¦¬ì™€ ì˜ë¯¸ì ìœ¼ë¡œ ìœ ì‚¬í•œ ë¦¬ë·° ì¶”ì¶œ

**Qdrant ê²€ìƒ‰ ì¿¼ë¦¬**:
```json
{
  "vector": [ì‚¬ìš©ìì¿¼ë¦¬_ì„ë² ë”©],
  "limit": 20,
  "with_payload": true,
  "score_threshold": 0.7,
  "filter": {
    "must": [
      {
        "key": "sentiment_score",
        "range": {"gte": 3}  // ê¸ì •/ì¤‘ë¦½ ë¦¬ë·°ë§Œ
      }
    ]
  }
}
```

**ë°˜í™˜ ê²°ê³¼**:
```json
[
  {
    "score": 0.89,  // ìœ ì‚¬ë„
    "payload": {
      "review_id": "REV_123",
      "product_number": "BK001",
      "content": "ëˆì ì„ë„ ì—†ê³  í¡ìˆ˜ë„ ë¹¨ë¼ì„œ ì¢‹ì•„ìš”",
      "sentiment_score": 5,
      "rating": 5.0,
      "skin_type": "ì§€ì„±"
    }
  },
  {
    "score": 0.85,
    "payload": {...}
  },
  ...
]
```

**ì•Œê³ ë¦¬ì¦˜**: Approximate Nearest Neighbor (ANN)
- âœ… O(log n) ê²€ìƒ‰ ì‹œê°„
- âœ… ì˜ë¯¸ ìœ ì‚¬ì„± ê¸°ë°˜ (ë‹¨ì–´ ë§¤ì¹­ ë¶ˆí•„ìš”)
- âœ… í˜ì´ë¡œë“œ í•„í„°ë§ ì§€ì›

---

#### 5ï¸âƒ£ **Keyword Search - PostgreSQL: í‚¤ì›Œë“œ ê¸°ë°˜ ê²€ìƒ‰**

**ëª©í‘œ**: SQL ê¸°ë°˜ ì •í™•í•œ ë§¤ì¹­ ê²€ìƒ‰

**ì¿¼ë¦¬**:
```sql
SELECT review_id, product_number, content, sentiment_score
FROM beauty_reviews
WHERE (
  content ILIKE '%ëˆì ì„ ì—†%' OR
  content ILIKE '%í¡ìˆ˜%'
)
AND sentiment_score >= 3
AND (skin_type = 'ì§€ì„±' OR skin_type IS NULL)
ORDER BY like_count DESC
LIMIT 20;
```

**ê²€ìƒ‰ ì¡°ê±´**:
- í…ìŠ¤íŠ¸ ë§¤ì¹­: ILIKE (ëŒ€ì†Œë¬¸ì êµ¬ë¶„ ì•ˆí•¨)
- ê°ì • í•„í„°: sentiment_score >= 3
- í”¼ë¶€íƒ€ì…: skin_type ë§¤ì¹­
- ì •ë ¬: ì¢‹ì•„ìš” ìˆ˜ ê¸°ì¤€

**ê²°í•© ì „ëµ**:
```javascript
// Vector Search ê²°ê³¼ + Keyword Search ê²°ê³¼ ë³‘í•©
const vectorResults = await qdrantSearch(...);
const keywordResults = await sqlSearch(...);

// ì¤‘ë³µ ì œê±° ë° ìŠ¤ì½”ì–´ í•©ì‚°
const merged = mergeResults(vectorResults, keywordResults);
// â†’ ìµœìƒì˜ ê´€ë ¨ ë¦¬ë·° 20ê°œ
```

---

#### 6ï¸âƒ£ **ABSA Aggregation: ì†ì„±ë³„ ì§‘ê³„**

**ëª©í‘œ**: ê²€ìƒ‰ëœ ë¦¬ë·°ë“¤ì˜ ABSA ê²°ê³¼ë¥¼ ì§‘ê³„

**ì…ë ¥**: 20ê°œì˜ ë¦¬ë·°

```javascript
const reviews = [
  {
    "absa_aspects": {
      "hydration": 5,
      "absorption": 4,
      "stickiness": 1,
      "fragrance": 3
    }
  },
  ...
];
```

**ì§‘ê³„ ë¡œì§**:
```javascript
const aggregated = {
  "hydration": {
    "avg_score": 4.8,
    "positive_count": 18,
    "negative_count": 1,
    "neutral_count": 1
  },
  "absorption": {
    "avg_score": 4.5,
    "positive_count": 17,
    "negative_count": 0,
    "neutral_count": 3
  },
  "stickiness": {
    "avg_score": 1.2,  // ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ (ëˆì ì„ ì ìŒ)
    "positive_count": 19,
    "negative_count": 0,
    "neutral_count": 1
  },
  ...
};
```

**ì¶œë ¥**:
```json
{
  "absa_summary": [
    {
      "aspect": "ë³´ìŠµë ¥",
      "avg_score": 4.8,
      "rating": "ë§¤ìš° ê¸ì •",
      "mention_rate": 90
    },
    {
      "aspect": "í¡ìˆ˜ë ¥",
      "avg_score": 4.5,
      "rating": "ê¸ì •",
      "mention_rate": 85
    },
    {
      "aspect": "ëˆì ì„",
      "avg_score": 1.2,  // ì—­ìˆœ
      "rating": "ë§¤ìš° ê¸ì •",
      "mention_rate": 95
    }
  ]
}
```

**ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**:
```
ëˆì ì„ ì ìˆ˜ 1.2 â†’ "ëˆì ì„ ê±°ì˜ ì—†ìŒ" (ì¢‹ìŒ)
ë³´ìŠµë ¥ ì ìˆ˜ 4.8 â†’ "ë³´ìŠµë ¥ ë§¤ìš° ë›°ì–´ë‚¨" (ì¢‹ìŒ)
â†’ ê²°ë¡ : "ì§€ì„±í”¼ë¶€ì— ìµœì ì˜ í† ë„ˆ"
```

---

#### 7ï¸âƒ£ **Generate Final Answer: ìµœì¢… ë‹µë³€ ìƒì„±**

**ëª©í‘œ**: ìˆ˜ì§‘ëœ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ í•œêµ­ì–´ ë‹µë³€ ìƒì„±

**ëª¨ë¸**: Upstage Solar Pro  
**ì˜¨ë„**: 0.7 (ì°½ì˜ì„±ê³¼ ì •í™•ì„± ê· í˜•)  
**ìµœëŒ€ í† í°**: 1500

**í”„ë¡¬í”„íŠ¸ êµ¬ì¡°**:
```
ë‹¹ì‹ ì€ 10ë…„ ê²½ë ¥ì˜ ë·°í‹° MD ì¶œì‹  ì‡¼í•‘ ì–´ë“œë°”ì´ì €ì…ë‹ˆë‹¤.

ì‚¬ìš©ì ì§ˆë¬¸: {user_query}

ë¶„ì„ ë°ì´í„°:
- ë¶„ì„í•œ ë¦¬ë·° ìˆ˜: 20ê°œ
- í‰ê·  í‰ì : 4.7/5
- í‰ê·  ê°ì • ì ìˆ˜: 4.6/5

ì†ì„±ë³„ í‰ê°€:
- ë³´ìŠµë ¥: 4.8/5 (90% ê¸ì •)
- í¡ìˆ˜ë ¥: 4.5/5 (85% ê¸ì •)
- ëˆì ì„: 1.2/5 (95% ê¸ì •, ì—­ìˆœ)

ì£¼ìš” ë¦¬ë·° ìƒ˜í”Œ:
1. [5/5] "ëˆì ì„ë„ ì—†ê³  í¡ìˆ˜ë„ ë¹¨ë¼ì„œ ì¢‹ì•„ìš”"
2. [5/5] "ì§€ì„±í”¼ë¶€ì— ì™„ë²½í•©ë‹ˆë‹¤"
...

ê·¼ê±° ìˆëŠ” ì¶”ì²œ ë‹µë³€ì„ ì œê³µí•˜ì„¸ìš”. ì‹¤ì œ ë¦¬ë·°ë¥¼ ì¸ìš©í•˜ì„¸ìš”.
```

**ë°˜í™˜ ë‹µë³€ ì˜ˆì‹œ**:
```
# ğŸ¯ 3ì¤„ ìš”ì•½
BK001 ìˆ˜ë¶„ ê°€ë“ í† ë„ˆëŠ” ì§€ì„± í”¼ë¶€ë¥¼ ìœ„í•œ ì™„ë²½í•œ ì„ íƒì…ë‹ˆë‹¤. 
ëˆì ì„ ì—†ì´ ë¹ ë¥´ê²Œ í¡ìˆ˜ë˜ë©° ë›°ì–´ë‚œ ë³´ìŠµë ¥ì„ ì œê³µí•©ë‹ˆë‹¤. 
20ëª…ì˜ ê³ ê° ì¤‘ 19ëª…ì´ "ëˆì ì„ ì—†ë‹¤"ê³  í‰ê°€í–ˆìŠµë‹ˆë‹¤.

## ğŸ“Š ë°ì´í„° ê¸°ë°˜ ë¶„ì„
- ë¶„ì„ ë¦¬ë·°: 20ê°œ
- í‰ê·  í‰ì : 4.7/5
- ê¸ì •ë„: 95%

## ğŸ” ì§€ì„± í”¼ë¶€ ê´€ì  ì†ì„±ë³„ í‰ê°€

**âœ… ëˆì ì„ (ë§¤ìš° ì¤‘ìš”)**
ì ìˆ˜: 1.2/5 (ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ)
- "ëˆì ì„ë„ ì—†ê³ " (19ëª… ë™ì˜)
- "ëˆê¸°ê°€ ì „í˜€ ì—†ì–´ì„œ" ì•„ì¹¨ì— ì‚¬ìš©í•˜ê¸° ì¢‹ìŠµë‹ˆë‹¤"

**âœ… ë³´ìŠµë ¥**
ì ìˆ˜: 4.8/5
- ê±´ì¡°í•¨ ì—†ì´ ì´‰ì´‰í•¨ ìœ ì§€
- "ì˜¤í›„ê¹Œì§€ ìˆ˜ë¶„ê° ìœ ì§€ë¨"

**âœ… í¡ìˆ˜ë ¥**
ì ìˆ˜: 4.5/5
- ë¹ ë¥¸ í¡ìˆ˜ë¡œ ë¶„ì‚¬ í›„ ì¦‰ì‹œ ë©”ì´í¬ì—… ê°€ëŠ¥
- "í™”ì¥ ì „ ê¸°ë‹¤ë¦´ í•„ìš” ì—†ìŒ"

## ğŸ’¡ ìµœì¢… íŒë‹¨
**ê°•ë ¥íˆ ì¶”ì²œí•©ë‹ˆë‹¤!**

ì´ ì œí’ˆì€ ì§€ì„± í”¼ë¶€ì˜ ìµœëŒ€ ê´€ì‹¬ì‚¬ì¸ "ëˆì ì„ ì—†ìŒ"ì—ì„œ 95% ë§Œì¡±ë„ë¥¼ ê¸°ë¡í–ˆìŠµë‹ˆë‹¤.
ë™ì‹œì— ì¶©ë¶„í•œ ë³´ìŠµë ¥ìœ¼ë¡œ í”¼ë¶€ ê·¹ê±´ì¡° í˜„ìƒì„ ë§‰ì•„ì¤ë‹ˆë‹¤.
```

**ë‹µë³€ í’ˆì§ˆ ì§€í‘œ**:
- âœ… í†µê³„ ê¸°ë°˜ ê·¼ê±°
- âœ… ì‹¤ì œ ë¦¬ë·° ì¸ìš©
- âœ… ì‚¬ìš©ì í”¼ë¶€íƒ€ì… ë°˜ì˜
- âœ… ëª…í™•í•œ ì¶”ì²œ/ë¹„ì¶”ì²œ
- âœ… ìì—°ìŠ¤ëŸ¬ìš´ í•œêµ­ì–´

---

#### 8ï¸âƒ£ **Log Query: ì¿¼ë¦¬ ë¡œê·¸ ì €ì¥**

**ëª©í‘œ**: ì‚¬ìš©ì ì¿¼ë¦¬ì™€ ì‹œìŠ¤í…œ ì‘ë‹µì„ ê¸°ë¡

**ì¿¼ë¦¬_logs í…Œì´ë¸”**:
```sql
CREATE TABLE query_logs (
    id SERIAL PRIMARY KEY,
    user_id VARCHAR(100),
    query TEXT NOT NULL,
    answer TEXT,
    reviews_analyzed INTEGER,
    avg_rating DECIMAL(2, 1),
    avg_sentiment DECIMAL(2, 1),
    response_time_ms INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**ì €ì¥ ë°ì´í„°**:
```json
{
  "user_id": "user_12345",
  "query": "ì§€ì„± í”¼ë¶€ì¸ë° ëˆì ì„ ì—†ëŠ” í† ë„ˆ ì¶”ì²œí•´ì¤„ë˜?",
  "answer": "BK001 ìˆ˜ë¶„ ê°€ë“ í† ë„ˆëŠ” ì§€ì„± í”¼ë¶€ë¥¼ ìœ„í•œ ì™„ë²½í•œ ì„ íƒì…ë‹ˆë‹¤...",
  "reviews_analyzed": 20,
  "avg_rating": 4.7,
  "avg_sentiment": 4.6,
  "response_time_ms": 2840,
  "created_at": "2026-02-06T15:30:00Z"
}
```

**í™œìš©**:
- âœ… ì‚¬ìš© ë¶„ì„ ë° í†µê³„
- âœ… ì‹œìŠ¤í…œ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- âœ… ì‚¬ìš©ì ì„ í˜¸ë„ ë¶„ì„
- âœ… ì¶”ì²œ ì •í™•ë„ ê°œì„ 

---

#### 9ï¸âƒ£ **Respond to Webhook: ì‚¬ìš©ìì—ê²Œ ì‘ë‹µ**

**HTTP ì‘ë‹µ**:
```json
{
  "success": true,
  "answer": "BK001 ìˆ˜ë¶„ ê°€ë“ í† ë„ˆëŠ” ì§€ì„± í”¼ë¶€ë¥¼ ìœ„í•œ ì™„ë²½í•œ ì„ íƒì…ë‹ˆë‹¤...",
  "metadata": {
    "reviews_analyzed": 20,
    "avg_rating": 4.7,
    "avg_sentiment": 4.6,
    "absa_aspects": 7,
    "generated_at": "2026-02-06T15:30:00Z"
  }
}
```

**HTTP ìƒíƒœ ì½”ë“œ**:
```
200 OK - ì •ìƒ ì‘ë‹µ
400 Bad Request - ì…ë ¥ ê²€ì¦ ì‹¤íŒ¨
500 Internal Server Error - ì‹œìŠ¤í…œ ì˜¤ë¥˜
```

---

## ë°ì´í„° íë¦„ ë° ë³€í™˜

### ğŸ”„ End-to-End ë°ì´í„° ë³€í™˜

```
1. RAW ë°ì´í„° (Kurly API)
   â”œâ”€ product_no: "BK001"
   â”œâ”€ name: "ìˆ˜ë¶„ ê°€ë“ í† ë„ˆ"
   â”œâ”€ reviews: [
   â”‚   {
   â”‚     "id": "REV_123",
   â”‚     "contents": "ì •ë§ ë³´ìŠµë ¥ì´ ì¢‹ì•„ìš”!",
   â”‚     "rating": 5.0,
   â”‚     "author": {"name": "ì‚¬ìš©ìA"},
   â”‚     "registeredAt": "2026-02-01T10:30:00Z"
   â”‚   }
   â”‚ ]
   â””â”€ ...

2. NORMALIZED ë°ì´í„° (Extract Review Data)
   â”œâ”€ review_id: "REV_123"
   â”œâ”€ product_number: "BK001"
   â”œâ”€ content: "ì •ë§ ë³´ìŠµë ¥ì´ ì¢‹ì•„ìš”!"
   â”œâ”€ rating: 5.0
   â”œâ”€ created_at: "2026-02-01T10:30:00Z"
   â”œâ”€ author: "ì‚¬ìš©ìA"
   â””â”€ ...

3. ENRICHED ë°ì´í„° (AI Analysis)
   â”œâ”€ (ìœ„ì˜ ëª¨ë“  í•„ë“œ)
   â”œâ”€ sentiment_score: 5
   â”œâ”€ sentiment_label: "Very satisfied"
   â”œâ”€ emotions: ["ê¸°ì¨", "ë§Œì¡±ê°"]
   â”œâ”€ key_points: ["ë³´ìŠµë ¥ ì¢‹ìŒ", "í¡ìˆ˜ ë¹ ë¦„"]
   â””â”€ absa_aspects: {
       "hydration": 5,
       "absorption": 4,
       ...
     }

4. VECTORIZED ë°ì´í„° (Embedding)
   â”œâ”€ (ìœ„ì˜ ëª¨ë“  í•„ë“œ)
   â”œâ”€ embedding: [0.123, -0.456, ..., 0.789]  // 1536-dim
   â””â”€ ...

5. STORED ë°ì´í„° (PostgreSQL + Qdrant)
   â”œâ”€ PostgreSQL: êµ¬ì¡°í™”ëœ ê´€ê³„í˜• ì €ì¥
   â”‚  â””â”€ SELECT/JOIN/GROUP BY ê°€ëŠ¥
   â””â”€ Qdrant: ë²¡í„° ì €ì¥
      â””â”€ ì˜ë¯¸ ìœ ì‚¬ë„ ê²€ìƒ‰ ê°€ëŠ¥
```

### ğŸ“Š ë°ì´í„° í¬ê¸° ì¶”ì •

```
1ê°œ ë¦¬ë·°:
â”œâ”€ í…ìŠ¤íŠ¸: ~500 bytes
â”œâ”€ ê°ì • ë¶„ì„ ê²°ê³¼: ~200 bytes
â”œâ”€ ABSA: ~400 bytes
â”œâ”€ ì„ë² ë”© (1536-dim): ~6 KB
â””â”€ ë©”íƒ€ë°ì´í„°: ~100 bytes
= ì•½ 7.2 KB/ë¦¬ë·°

ì¼ì¼ ì²˜ë¦¬ ì˜ˆì‹œ (10ê°œ ì œí’ˆ Ã— 50ê°œ ë¦¬ë·°):
â”œâ”€ ì´ 500ê°œ ë¦¬ë·°
â”œâ”€ ë°ì´í„° í¬ê¸°: 3.6 MB
â”œâ”€ ë²¡í„° ì €ì¥ì†Œ: 3 MB
â””â”€ ë©”ëª¨ë¦¬ ì‚¬ìš©: ~50-100 MB
```

---

## íŒŒì´í”„ë¼ì¸ êµ¬ì¡°

### ğŸ›ï¸ ë³‘ë ¬ ì²˜ë¦¬ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Main Workflow                           â”‚
â”‚                                                 â”‚
â”‚  Schedule (Daily Midnight)                      â”‚
â”‚         â†“                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PARALLEL PIPELINE                        â”‚  â”‚
â”‚  â”‚                                          â”‚  â”‚
â”‚  â”‚  Path A: Products        Path B: Reviews â”‚  â”‚
â”‚  â”‚  â”œâ”€ Get Products    â”œâ”€ Extract Reviews  â”‚  â”‚
â”‚  â”‚  â”œâ”€ (10ê°œ)         â”œâ”€ (ë³‘ë ¬ ì²˜ë¦¬)       â”‚  â”‚
â”‚  â”‚  â””â”€ Split Batch    â””â”€ Sentiment Analysisâ”‚  â”‚
â”‚  â”‚                       â””â”€ ABSA Analysis   â”‚  â”‚
â”‚  â”‚                       â””â”€ Embedding      â”‚  â”‚
â”‚  â”‚                       â””â”€ Save to DB     â”‚  â”‚
â”‚  â”‚                       â””â”€ Save to Qdrant â”‚  â”‚
â”‚  â”‚                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â†“                                       â”‚
â”‚  Webhook Ready for User Queries                â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âš¡ ë°°ì¹˜ ì²˜ë¦¬ ìµœì í™”

```
Products: [10ê°œ]
    â†“
Split into Batches
    â”œâ”€ Batch 1: [5ê°œ] â”€â”€â”€â”€â”
    â””â”€ Batch 2: [5ê°œ] â”€â”€â”€â”€â”¤
                           â”œâ”€ ë³‘ë ¬ ì²˜ë¦¬
    Reviews Fetching â”€â”€â”€â”€â”€â”€â”¤
    Sentiment Analysis â”€â”€â”€â”€â”¤
    ABSA Analysis â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    Embedding â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                           â”œâ”€ ë™ì‹œ ì™„ë£Œ
    Save to PostgreSQL â”€â”€â”€â”€â”¤
    Save to Qdrant â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë°°ì¹˜ í¬ê¸° ì„¤ì •**:
```
batchSize: 5

ì¥ì :
- âœ… ë©”ëª¨ë¦¬ íš¨ìœ¨ì 
- âœ… API ìš”ì²­ ë³‘ë ¬í™”
- âœ… ì²˜ë¦¬ ì‹œê°„ ë‹¨ì¶•

ê³„ì‚°:
- 10ê°œ ì œí’ˆ â†’ 2 ë°°ì¹˜
- ë°°ì¹˜ë‹¹ ~30ì´ˆ â†’ ì´ ~60ì´ˆ (ìˆœì°¨)
- ë³‘ë ¬ ì²˜ë¦¬ â†’ ~30ì´ˆ (50% ë‹¨ì¶•)
```

---

## ì‹¤ë¬´ì  ê³ ë ¤ì‚¬í•­

### ğŸ” ë³´ì•ˆ ë° ì ‘ê·¼ ì œì–´

```json
{
  "Credentials Management": {
    "PostgreSQL": {
      "user": "n8n",
      "password": "${POSTGRES_PASSWORD}",
      "encryption": "n8n_encryption_key",
      "scope": "beauty_reviews í…Œì´ë¸” ì ‘ê·¼ë§Œ"
    },
    "OpenAI API": {
      "key": "${OPENAI_API_KEY}",
      "rate_limit": "3,500 RPM",
      "usage_tracking": "enabled"
    },
    "Upstage Solar": {
      "key": "${UPSTAGE_API_KEY}",
      "endpoint": "https://api.upstage.ai/v1/solar"
    }
  },
  
  "Data Privacy": {
    "user_id": "ìµëª…í™” ê¶Œì¥",
    "personal_reviews": "GDPR ì»´í”Œë¼ì´ì–¸ìŠ¤",
    "data_retention": "1ë…„"
  }
}
```

### ğŸ“ˆ í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

```
Current State:
â”œâ”€ 10ê°œ ì œí’ˆ/ì¼
â”œâ”€ ~500ê°œ ë¦¬ë·°/ì¼
â””â”€ ~3.6 MB ë°ì´í„°/ì¼

Future Scaling (100ë°°):
â”œâ”€ 1,000ê°œ ì œí’ˆ/ì¼
â”œâ”€ ~50,000ê°œ ë¦¬ë·°/ì¼
â””â”€ ~360 MB ë°ì´í„°/ì¼

í•´ê²°ì±…:
1. ë°°ì¹˜ í¬ê¸° ì¡°ì • (5 â†’ 20)
2. ë³‘ë ¬ ì›Œí¬í”Œë¡œìš° ì¶”ê°€
3. ë°ì´í„°ë² ì´ìŠ¤ íŒŒí‹°ì…”ë‹
4. ë²¡í„° DB í´ëŸ¬ìŠ¤í„°ë§
```

### ğŸ›¡ï¸ ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ

```javascript
// 1. API íƒ€ì„ì•„ì›ƒ
try {
  const reviews = await fetchReviews(productId);
} catch (error) {
  if (error.code === 'TIMEOUT') {
    // ì¬ì‹œë„ (exponential backoff)
    await retry(async () => fetchReviews(productId), {
      maxAttempts: 3,
      delay: 1000 // 1ì´ˆ
    });
  }
}

// 2. ë°ì´í„° ìœ íš¨ì„±
if (!review.content || !review.rating) {
  log.warn(`Invalid review: ${review.id}`);
  continue; // ê±´ë„ˆë›°ê¸°
}

// 3. AI ë¶„ì„ ì‹¤íŒ¨
if (!sentiment_response || !sentiment_response.sentiment_score) {
  sentiment_score = 3; // ê¸°ë³¸ê°’ (ì¤‘ë¦½)
}

// 4. ë°ì´í„° ì¤‘ë³µ í™•ì¸
const exists = await db.query(
  'SELECT 1 FROM beauty_reviews WHERE review_id = $1',
  [review.review_id]
);
if (exists) {
  // UPDATE ìˆ˜í–‰
} else {
  // INSERT ìˆ˜í–‰
}
```

---

## ì„±ëŠ¥ ìµœì í™” ì „ëµ

### âš¡ ì‘ë‹µ ì‹œê°„ ìµœì í™”

```
Target Latency: < 5ì´ˆ (ì‚¬ìš©ì ì¿¼ë¦¬ â†’ ìµœì¢… ë‹µë³€)

Breakdown:
â”œâ”€ Query Parsing: 0.5ì´ˆ (Solar)
â”œâ”€ Vector Search: 1.0ì´ˆ (Qdrant)
â”œâ”€ Keyword Search: 0.5ì´ˆ (PostgreSQL)
â”œâ”€ ABSA Aggregation: 0.5ì´ˆ (Code)
â”œâ”€ Answer Generation: 2.0ì´ˆ (Solar)
â””â”€ Response: 0.5ì´ˆ
= ì´ 5ì´ˆ

ìµœì í™”:
1. ìºì‹±: ë™ì¼ ì¿¼ë¦¬ëŠ” 1ì‹œê°„ ìºì‹œ
2. ì¸ë±ì‹±: sentiment_score, skin_type ì¸ë±ìŠ¤
3. ë°°ì¹˜: ë²¡í„° ê²€ìƒ‰ì„ 20ê°œ ìš”ì²­ìœ¼ë¡œ ìµœì í™”
4. ë¹„ë™ê¸°: ë¡œê·¸ ì €ì¥ì„ ë°±ê·¸ë¼ìš´ë“œì—ì„œ
```

### ğŸ’¾ ì €ì¥ì†Œ ìµœì í™”

```sql
-- 1. JSONB ì»¬ëŸ¼ ì¸ë±ì‹±
CREATE INDEX idx_emotions_gin ON beauty_reviews USING GIN (emotions);
CREATE INDEX idx_absa_gin ON beauty_reviews USING GIN (absa_aspects);

-- 2. íŒŒí‹°ì…”ë‹ (ëŒ€ê·œëª¨ ë°ì´í„°ìš©)
CREATE TABLE beauty_reviews_2026_02 PARTITION OF beauty_reviews
  FOR VALUES FROM ('2026-02-01') TO ('2026-03-01');

-- 3. ì•„ì¹´ì´ë¹™ (1ë…„ ì´ìƒ ë°ì´í„°)
SELECT * FROM beauty_reviews WHERE created_at < NOW() - INTERVAL '1 year'
  INTO OUTFILE 'beauty_reviews_archive_2025.sql';
DELETE FROM beauty_reviews WHERE created_at < NOW() - INTERVAL '1 year';
```

---

## ì—ëŸ¬ ì²˜ë¦¬ ë° ì•ˆì •ì„±

### ğŸš¨ ì£¼ìš” ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤ ë° ëŒ€ì‘

| ì‹œë‚˜ë¦¬ì˜¤ | ì›ì¸ | í•´ê²°ì±… |
|---------|------|--------|
| **Kurly API 503** | ì™¸ë¶€ ì„œë¹„ìŠ¤ ë‹¤ìš´ | ì¬ì‹œë„ 3íšŒ, ì‹¤íŒ¨ ì‹œ ë¡œê·¸ë§Œ ê¸°ë¡ |
| **PostgreSQL ì—°ê²° ì‹¤íŒ¨** | DB ë‹¤ìš´ ë˜ëŠ” ìê²©ì¦ëª… ì˜¤ë¥˜ | í—¬ìŠ¤ì²´í¬, ìë™ ì¬ì—°ê²° |
| **OpenAI API Rate Limit** | ìš”ì²­ ì´ˆê³¼ | Queue ê¸°ë°˜ ì²˜ë¦¬, ìš”ì²­ ëŒ€ê¸° |
| **Qdrant ë²¡í„° ì €ì¥ ì‹¤íŒ¨** | ë©”ëª¨ë¦¬ ë¶€ì¡± ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ | ë¡œì»¬ ìºì‹œ â†’ ë‚˜ì¤‘ì— ì¬ì‹œë„ |
| **AI ë¶„ì„ ì˜¤ë¥˜** | ëª¨ë¸ ì˜¤ë²„ë¡œë“œ ë˜ëŠ” ì…ë ¥ ì˜¤ë¥˜ | í´ë°± ê°’ ì‚¬ìš© (sentiment_score=3) |
| **ì‚¬ìš©ì ì¿¼ë¦¬ íŒŒì‹± ì‹¤íŒ¨** | ëª¨í˜¸í•œ ì…ë ¥ | ê¸°ë³¸ í•„í„° ì ìš©, ì „ì²´ ë°ì´í„° ê²€ìƒ‰ |

### ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼

```json
{
  "Metrics": {
    "crawling_duration_seconds": "< 120ì´ˆ",
    "reviews_per_minute": "> 10ê°œ",
    "query_latency_ms": "< 5000",
    "error_rate": "< 1%",
    "api_success_rate": "> 99%"
  },
  
  "Alerts": {
    "crawling_timeout": "ìŠ¤ì¼€ì¤„ë§ëœ í¬ë¡¤ë§ì´ 30ë¶„ ì´ìƒ ì§€ì†",
    "high_error_rate": "ì˜¤ë¥˜ìœ¨ > 10%",
    "query_latency_spike": "í‰ê·  ëŒ€ë¹„ 3ë°° ì´ìƒ",
    "api_failures": "ì—°ì† 5íšŒ API ì‹¤íŒ¨"
  },
  
  "Logging": {
    "level": "INFO (í”„ë¡œë•ì…˜) / DEBUG (ê°œë°œ)",
    "retention": "30ì¼",
    "format": "JSON (íŒŒì‹± ìš©ì´)"
  }
}
```

---

## ê²°ë¡  ë° í–¥í›„ ê³„íš

### âœ… í˜„ì¬ êµ¬í˜„ ìƒíƒœ

**ì™„ë£Œ**:
- âœ… ì›Œí¬í”Œë¡œìš° ì„¤ê³„ ë° êµ¬í˜„
- âœ… PostgreSQL ìŠ¤í‚¤ë§ˆ ì •ì˜
- âœ… AI ëª¨ë¸ í†µí•© (Sentiment, ABSA)
- âœ… ë²¡í„° ì„ë² ë”© íŒŒì´í”„ë¼ì¸
- âœ… ì¿¼ë¦¬ ì‘ë‹µ ì‹œìŠ¤í…œ

**ì§„í–‰ ì¤‘**:
- ğŸ”„ n8n ì›Œí¬í”Œë¡œìš° í™œì„±í™”
- ğŸ”„ ì‹¤ì œ ë°ì´í„° í…ŒìŠ¤íŠ¸
- ğŸ”„ ì„±ëŠ¥ íŠœë‹

### ğŸ“‹ í–¥í›„ ê°œì„  ë¡œë“œë§µ

**Phase 2 (2-4ì£¼)**:
```
- ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘
- ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ êµ¬ì¶•
- API ì‘ë‹µ ì„±ëŠ¥ ìµœì í™”
- ë¹„ìš© ë¶„ì„ (API ì‚¬ìš©ë£Œ)
```

**Phase 3 (1-2ê°œì›”)**:
```
- ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ ê³ ë„í™”
- ì‚¬ìš©ìë³„ ë§ì¶¤ í•™ìŠµ (ML)
- ëª¨ë°”ì¼ ì•± API ì œê³µ
- í•œêµ­ ì´ì»¤ë¨¸ìŠ¤ í”Œë«í¼ í™•ëŒ€ (Gë§ˆì¼“, ì¿ íŒ¡ ë“±)
```

**Phase 4 (3-6ê°œì›”)**:
```
- ë‹¤êµ­ì–´ ì§€ì›
- ì‹¤ì‹œê°„ ì¬ê³  ì—°ë™
- ì±„íŒ…ë´‡ ì¸í„°í˜ì´ìŠ¤
- ì˜ìƒ ê¸°ë°˜ ì œí’ˆ ë¶„ì„
```

---

## ë¶€ë¡: ê¸°ìˆ  ìŠ¤íƒ ìƒì„¸ ì •ë³´

### ğŸ”— API ì—”ë“œí¬ì¸íŠ¸

```
n8n Webhooks:
â”œâ”€ POST /webhook/beauty-kurly-agent â†’ í¬ë¡¤ë§ íŠ¸ë¦¬ê±°
â””â”€ POST /webhook/beauty-query â†’ ì‚¬ìš©ì ì¿¼ë¦¬

External APIs:
â”œâ”€ https://api.kurly.com/v2/reviews/products/{id} â†’ ë¦¬ë·° í¬ë¡¤ë§
â”œâ”€ https://api.openai.com/v1/embeddings â†’ ë²¡í„° ìƒì„±
â”œâ”€ https://api.openai.com/v1/chat/completions â†’ ë‹µë³€ ìƒì„±
â””â”€ https://api.upstage.ai/v1/solar â†’ ê°ì •ë¶„ì„

Database:
â”œâ”€ postgresql://n8n:password@postgres:5432/n8n
â””â”€ Qdrant at http://qdrant:6333

Monitoring:
â””â”€ n8n Execution Logs at http://localhost:5678
```

### ğŸ“š ì°¸ê³  ìë£Œ

```
[1] n8n Documentation: https://docs.n8n.io
[2] PostgreSQL JSONB: https://www.postgresql.org/docs/14/datatype-json.html
[3] Qdrant Vector Search: https://qdrant.tech/documentation
[4] OpenAI API: https://platform.openai.com/docs
[5] Upstage Solar: https://console.upstage.ai/docs
```

---

**ë¬¸ì„œ ë²„ì „**: 1.0  
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2026-02-06  
**ì‘ì„±ì**: AI Copilot  
**ìƒíƒœ**: ì§„í–‰ ì¤‘
